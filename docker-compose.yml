services:
  mariadb-mcp:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        # Set to "none", "openai", "gemini", "huggingface", or "all"
        # Default: "none" (no embedding dependencies installed)
        EMBEDDING_EXTRAS: none
    container_name: mariadb-mcp
    env_file: .env
    ports:
      - "30003:30003"
    restart: unless-stopped
    # Resource limits to control memory usage
    deploy:
      resources:
        limits:
          memory: 512M
        reservations:
          memory: 128M
    networks:
      - shared_network

networks:
  shared_network:
    external: true
    name: shared_network
